# dotfiles

> The (dot)files that make the magic happen.

Highly-opinionated, UNIX-friendly, macOS-directed.

## Quick Start

```bash
git clone https://github.com/lacymorrow/dotfiles.git ~/dotfiles
cd ~/dotfiles && ./setup.sh
```

On a truly fresh Mac (no git yet):

```bash
curl -fsSL https://raw.githubusercontent.com/lacymorrow/dotfiles/main/setup.sh | bash
```

The setup wizard will:
1. Install prerequisites (Xcode CLT, Homebrew, Node.js)
2. Prompt for git user name/email (writes `~/.gitconfig.local`)
3. Prompt for computer name (macOS)
4. Let you pick which modules to run (symlinks, brew, node, macOS settings, npm login)

### Manual Scripts

You can also run individual scripts directly:

```bash
./symlink_dotfiles.sh   # Symlink dotfiles to ~/
./brew.sh               # Homebrew packages
./node.sh               # Node.js via NVM + Bun
./apply-macos-settings.sh  # macOS system defaults
```

## What's Included

### Shell (`home/`)

All files in `home/` are symlinked to `~/` by the setup wizard (or `symlink_dotfiles.sh`).

| File | Purpose |
|------|---------|
| `.zprofile` | Login shell setup — Homebrew, NVM, completions, sources dotfile modules |
| `.zshrc` | Interactive shell — zsh options, key bindings, Starship prompt |
| `.aliases` | Shell aliases |
| `.functions` | Shell functions |
| `.exports` | Environment variables |
| `.gitconfig` | Git config, aliases, colors, URL shorthands |
| `.npmrc` | npm defaults — uses `${NPM_TOKEN}` env var for auth (see Secrets below) |
| `.vimrc` | Vim config — line numbers, search, backup/undo, status line |
| `.tmux.conf` | Tmux config — `Ctrl-a` prefix, vim-style navigation, TPM plugins |
| `starship.toml` | Starship prompt theme |

### Scripts

| Script | What it does |
|--------|-------------|
| `setup.sh` | **Main entry point** — installs prereqs, launches interactive wizard |
| `symlink_dotfiles.sh` | Symlinks `home/*` to `~/`, backs up existing files to `~/dotfiles_old` |
| `brew.sh` | Installs Homebrew packages |
| `node.sh` | Installs NVM and Node.js |
| `apply-macos-settings.sh` | Detailed macOS defaults (parameterized — no hardcoded names) |

### Other

| File | Purpose |
|------|---------|
| `Brewfile` | Declarative Homebrew dependencies |
| `settings/` | App-specific settings (VS Code, etc.) |
| `.ssh/` | SSH config template |
| `setup/` | Node.js setup wizard (`@clack/prompts`) |

## Git Configuration

The tracked `.gitconfig` contains aliases, colors, and settings — but **no personal info**. User-specific config is stored in `~/.gitconfig.local` (generated by the setup wizard, never committed):

```ini
# ~/.gitconfig.local
[user]
    name = Your Name
    email = you@example.com
```

The tracked `.gitconfig` includes it via `[include] path = ~/.gitconfig.local`.

## Secrets

Tokens and credentials go in `~/.secrets` — this file is sourced automatically by `.zprofile` but is **never committed** to this repo.

```bash
# ~/.secrets — create this on each machine
export NPM_TOKEN="your-npm-token-here"
# Add other API keys, credentials, etc.
```

This is how `home/.npmrc` works safely — it references `${NPM_TOKEN}` which npm interpolates at runtime. No token in the repo, no token in git history.

The file is optional. If `~/.secrets` doesn't exist, it's silently skipped. `~/.extra` also works the same way for non-secret local customizations.

## Customization

The dotfile loading order in `.zprofile` is:

```
~/.path → ~/.exports → ~/.aliases → ~/.docker_aliases → ~/.functions → ~/.secrets → ~/.extra
```

All files are optional — missing ones are silently skipped.

- **`~/.secrets`** — API tokens, credentials (never committed)
- **`~/.extra`** — Machine-specific overrides, non-secret customizations (never committed)
- **`~/.path`** — Additional `$PATH` entries

## Key Highlights

### Git

- `git go <branch>` — checkout or create branch
- `git dm` — delete merged branches
- `git fuck` — `reset HEAD --hard`
- `git pushup` / `git pu` — push and set upstream
- `push.autoSetupRemote = true` — new branches auto-track upstream

### Tmux (`Ctrl-a` prefix)

- `|` / `-` — split horizontal / vertical
- `h` `j` `k` `l` — navigate panes
- `H` `J` `K` `L` — resize panes
- TPM with tmux-sensible and tmux-resurrect

### Vim

- Relative line numbers, 80-char column guide
- Persistent undo, system clipboard
- Netrw tree view (no plugins needed)
